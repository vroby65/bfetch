#!/bin/bash
# bfetcth.sh - mini neofetch + ASCII distro logos

# -- colors -------------------------------------------------------------------
c0=$'\e[0m'; c1=$'\e[1;31m'; c2=$'\e[1;32m'; c3=$'\e[1;34m'; c4=$'\e[1;36m'; c5=$'\e[1;35m'; c6=$'\e[1;33m'; c7=$'\e[1;37m';
c8=$'\e[0;30m'; c9=$'\e[0;31m'; c10=$'\e[0;32m'; c11=$'\e[0;34m'; c12=$'\e[0;36m'; c13=$'\e[0;35m'; c14=$'\e[0;33m'; c15=$'\e[0;37m'

# -- sys info (English comments) ----------------------------------------------
USER_HOST="$USER@$(hostname)"
OS="$(uname -o)"
KERNEL="$(uname -r)"
UPTIME="$(uptime -p | cut -d ' ' -f2-)"
SHELL="$SHELL"
TERM="$TERM"
MEM="$(free -m | awk '/Mem:/ {print $3 "MB / " $2 "MB"}')"
DISK="$(df -h / | awk 'NR==2 {print $3 " / " $2}')"
DISTRO="$(awk -F= '/^PRETTY_NAME=/{gsub(/"/,"",$2);print $2}' /etc/os-release 2>/dev/null)"
ID="$(awk -f - /etc/os-release 2>/dev/null <<'AWK'
/^ID=/ { x=$0; sub(/^ID=/,"",x); gsub(/"/,"",x); print x }
AWK
)"

# -- choose logo (builtin or user override) -----------------------------------
alias_id() { case "$1" in linuxmint) echo mint;; opensuse-tumbleweed|opensuse-leap) echo opensuse;; *) echo "$1";; esac; }
user_logo() { [ -f "$HOME/.asciidistro/$1.ansi" ] && cat "$HOME/.asciidistro/$1.ansi"; }

get_logo() {
  case "$(alias_id "$1")" in 
  arch) cat <<EOF
${c4}      ▄ 
${c4}     ███  
${c4}    █████    
${c4}   ███ ███    
${c4}  ███   ███    
${c4} █         █   ${c0}
EOF
;;
  debian) cat <<EOF
${c1}    ▄▄▄      
${c1}  █▀   ▀█     
${c1}▄▀  ▄▄.  █      
${c1}▌   █   ▄▀     
${c1}▀▌   ▀▀▀          
${c1} ▀▄▄.  ${c0}
EOF
;;
  ubuntu) cat <<EOF
${c1}           
${c1}       ▄▄   
${c1}    ▄▀ ▀▀       
${c1} ██       █     
${c1}    ▀▄ ▄▄    
${c1}       ▀▀  ${c0}
EOF
;;
  fedora) cat <<EOF
${c11}  
${c11}        
${c11}      ▄▀▀▄ 
${c11}    ▄ █▄
${c11}   █  █
${c11}    ▀▀     ${c0}
EOF
;;
  mint) cat <<EOF
${c2}              
${c2}            
${c2} █  ▄ ▄        
${c2} █ █ █ █   
${c2} ▀▄▄▄▄▄▀ ${c0}
EOF
;;
  manjaro) cat <<EOF
${c10}            
${c10} ███████ ███
${c10} ███ ▄▄▄ ███
${c10} ███ ███ ███
${c10} ███ ███ ███
${c10} ███ ███ ███ ${c0}
EOF
;;
  void) cat <<EOF
${c10}    ${c12}▄▄▄▄▄       
${c10}  ▄   ${c12}▄  ▀▄      
${c10}  █  ${c12}███  █    
${c10}  ▀▄  ${c12}▀   ▀     
${c10}    ▀▀▀▀▀       
${c10}            ${c0}
EOF
;;
  alpine) cat <<EOF
${c11}            
${c11}            
${c11}    ▄   ▄      
${c11}  ▄▀ ▀▄▀ ▀▄  
${c11} ▀     ▀   ▀ ${c0}
EOF
;;
  gentoo) cat <<EOF
${c5}    ▄▄▄      
${c5}   █   ▀▀▄       
${c5}    ▀▄ ▀  ▀▄   
${c5}   ▄▀     ▄▄▀ 
${c5}  ▀▄  ▄▄▀▀   
${c5}    ▀▀    
${c5}          ${c0}
EOF
;;
  opensuse) cat <<EOF
${c2}           
${c2}    ▀███▄▄▄    
${c2} █████  0  █
${c2}██████ ▀▀▀▀▀▀     
${c2}███████▀▀▀▀▀▀▀     
${c2}       
${c2}           ${c0}
EOF
;;
  endeavouros) cat <<EOF
${c5}         ▄     
${c5}       ▄███▄    
${c5}     ▄███████    
${c5}    ████████▀   
${c5}             ${c0}
EOF
;;
  *) cat <<'EOF'
   .--.   
  |o_o |  
  |:_/ |  
 //   \ \ 
(|     | )
/'\_   _/`\
\___)=(___/
EOF
  ;;
  esac
}

# -- pick and cache logo ------------------------------------------------------
LOGO="$(user_logo "$ID")"
[ -z "${LOGO// }" ] && LOGO="$(get_logo "${ID:-tux}")"
l(){ sed -n "${1}p" <<<"$LOGO"; }  # get Nth logo line

# -- CPU (single line) --------------------------------------------------------
CPU="$(grep -m1 'model name' /proc/cpuinfo 2>/dev/null | cut -d':' -f2- | sed 's/^ //')"
[ -z "$CPU" ] && CPU="$(lscpu 2>/dev/null | awk -F: '/Model name/{print $2}' | sed 's/^ //')"

# -- print aligned info + logo (7 lines of logo) ------------------------------
printf "${c6}OS:     ${c0}%-50s %s\n" "$OS"     "$(l 1)"
printf "${c6}Distro: ${c0}%-50s %s\n" "$DISTRO" "$(l 2)"
printf "${c6}Kernel: ${c0}%-50s %s\n" "$KERNEL" "$(l 3)"
printf "${c6}Uptime: ${c0}%-50s %s\n" "$UPTIME" "$(l 4)"
printf "${c6}Shell:  ${c0}%-50s %s\n" "$SHELL"  "$(l 5)"
printf "${c6}Term:   ${c0}%-50s %s\n" "$TERM"   "$(l 6)"
printf "${c6}CPU:    ${c0}%-50s %s\n" "$CPU"    "$(l 7)"
printf "${c6}Memory: ${c0}%-48s %s\n" "$MEM"    "${c0}██${c1}██${c2}██${c3}██${c4}██${c5}██${c6}██${c7}██"
printf "${c6}Disk:   ${c0}%-48s %s\n" "$DISK"   "${c8}██${c9}██${c10}██${c11}██${c12}██${c13}██${c14}██${c15}██"
printf "\n${c4}%s${c0}\n" "$USER_HOST"
